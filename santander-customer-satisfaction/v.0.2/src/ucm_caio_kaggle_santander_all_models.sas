/* Load the dataset to ucm library */
libname ucm '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\dataset\'; 
run; 

PROC IMPORT OUT= UCM.models
            DATAFILE= "\\vmware-host\Shared Folders\git\Bitbucket\santan
der-kaggle\dataset\train.csv" 
            DBMS=CSV REPLACE;
     GETNAMES=YES;
     DATAROW=2; 
RUN;



data UCM.models; set UCM.models; id=_n_; run;

/* Show the number of missing values */
ods output nlevels=niveles; proc freq data=UCM.models nlevels; tables _all_/ noprint; run;
proc means data=UCM.models n nmiss; run;

/*
76020*0.7 = 53.214 rows
70% of the dataset is equal 53.214 rows

data ucm.santander; set ucm.santander; Run; 
data uno;set ucm.santander; u=(ranuni(12355));
proc sort data=uno; by u; 
data train test;
set uno; if _n_<=53214 then output train;else output test;run;


*/

/* para pruebas 

999*0.7 = 699 rows
70% of the dataset is equal 699 rows

*/


data UCM.models;
set UCM.models (drop = ID);
run;


data UCM.models;
set UCM.models (drop = ind_var29_0
ind_var29
ind_var13_medio
ind_var18
ind_var26
ind_var25
ind_var32
ind_var34
ind_var37
ind_var39
num_var29_0
num_var29
num_var13_medio
num_var18
num_var26
num_var25
num_var32
num_var34
num_var37
num_var39
saldo_var29
saldo_medio_var13_medio_ult1
delta_num_reemb_var13_1y3
delta_num_reemb_var17_1y3
delta_num_reemb_var33_1y3
delta_num_trasp_var17_in_1y3
delta_num_trasp_var17_out_1y3
delta_num_trasp_var33_in_1y3
delta_num_trasp_var33_out_1y3 
ind_var2_0
ind_var2
ind_var27_0
ind_var28_0
ind_var28
ind_var27
ind_var41
ind_var46_0
ind_var46
num_var27_0
num_var28_0
num_var28
num_var27
num_var41
num_var46_0
num_var46
saldo_var28
saldo_var27
saldo_var41
saldo_var46
imp_amort_var18_hace3
imp_amort_var34_hace3
imp_reemb_var13_hace3
imp_reemb_var33_hace3
imp_trasp_var17_out_hace3
imp_trasp_var33_out_hace3
num_var2_0_ult1
num_var2_ult1
num_reemb_var13_hace3
num_reemb_var33_hace3
num_trasp_var17_out_hace3
num_trasp_var33_out_hace3
saldo_var2_ult1
saldo_medio_var13_medio_hace3);
run;


data UCM.models;
set UCM.models; 
if _n_>=10000 then delete;
run;

/* Describe the dataset variables */
proc contents data=UCM.models out=sal;
data; set sal; put name @@; run;



data UCM.models; set UCM.models; Run; 
data uno;set UCM.models; u=(ranuni(12355));
proc sort data=uno; by u; 
data train test;
set uno; if _n_<=7000 then output train;
else output test;
run;


proc surveyselect data=uno out=muestra method=srs n=3000 outall seed=12345;
data train valida;set muestra; if selected=1 then output train;else output valida;run;






ods graphics on;


%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\macro randomselect v 4.0.sas';

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\cruzada logistica y neural.sas';

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\cruzada logistica y neural con early.sas';





Proc logistic data=uno;
class ;
model TARGET=VAR2 VAR3 delta_imp_amort_var18_1y3 delta_imp_amort_var34_1y3 delta_imp_aport_var13_1y3
delta_imp_aport_var17_1y3 delta_imp_aport_var33_1y3 delta_imp_compra_var44_1y3
delta_imp_reemb_var13_1y3 delta_imp_reemb_var17_1y3 delta_imp_reemb_var33_1y3
delta_imp_trasp_var17_in_1y3 delta_imp_trasp_var17_out_1y3 delta_imp_trasp_var33_in_1y3
delta_imp_trasp_var33_out_1y3 delta_imp_venta_var44_1y3 delta_num_aport_var13_1y3
delta_num_aport_var17_1y3 delta_num_aport_var33_1y3 delta_num_compra_var44_1y3
delta_num_venta_var44_1y3 imp_amort_var18_ult1 imp_amort_var34_ult1 imp_aport_var13_hace3
imp_aport_var13_ult1 imp_aport_var17_hace3 imp_aport_var17_ult1 imp_aport_var33_hace3
imp_aport_var33_ult1 imp_compra_var44_hace3 imp_compra_var44_ult1 imp_ent_var16_ult1
imp_op_var39_comer_ult1 imp_op_var39_comer_ult3 imp_op_var39_efect_ult1 imp_op_var39_efect_ult3
imp_op_var39_ult1 imp_op_var40_comer_ult1 imp_op_var40_comer_ult3 imp_op_var40_efect_ult1
imp_op_var40_efect_ult3 imp_op_var40_ult1 imp_op_var41_comer_ult1 imp_op_var41_comer_ult3
imp_op_var41_efect_ult1 imp_op_var41_efect_ult3 imp_op_var41_ult1 imp_reemb_var13_ult1
imp_reemb_var17_hace3 imp_reemb_var17_ult1 imp_reemb_var33_ult1 imp_sal_var16_ult1
imp_trans_var37_ult1 imp_trasp_var17_in_hace3 imp_trasp_var17_in_ult1 imp_trasp_var17_out_ult1
imp_trasp_var33_in_hace3 imp_trasp_var33_in_ult1 imp_trasp_var33_out_ult1 imp_var43_emit_ult1
imp_var7_emit_ult1 imp_var7_recib_ult1 imp_venta_var44_hace3 imp_venta_var44_ult1 ind_var1 ind_var5
ind_var6 ind_var8 ind_var12 ind_var13 ind_var14 ind_var17 ind_var19 ind_var20 ind_var24 ind_var30
ind_var31 ind_var33 ind_var40 ind_var44 ind_var10_ult1 ind_var10cte_ult1 ind_var12_0 ind_var13_0
ind_var13_corto ind_var13_corto_0 ind_var13_largo ind_var13_largo_0 ind_var13_medio_0 ind_var14_0
ind_var17_0 ind_var18_0 ind_var1_0 ind_var20_0 ind_var24_0 ind_var25_0 ind_var25_cte ind_var26_0
ind_var26_cte ind_var30_0 ind_var31_0 ind_var32_0 ind_var32_cte ind_var33_0 ind_var34_0 ind_var37_0
ind_var37_cte ind_var39_0 ind_var40_0 ind_var41_0 ind_var43_emit_ult1 ind_var43_recib_ult1 ind_var44_0
ind_var5_0 ind_var6_0 ind_var7_emit_ult1 ind_var7_recib_ult1 ind_var8_0 ind_var9_cte_ult1
ind_var9_ult1 num_aport_var13_hace3 num_aport_var13_ult1 num_aport_var17_hace3 num_aport_var17_ult1
num_aport_var33_hace3 num_aport_var33_ult1 num_compra_var44_hace3 num_compra_var44_ult1
num_ent_var16_ult1 num_med_var22_ult3 num_med_var45_ult3 num_meses_var12_ult3
num_meses_var13_corto_ult3 num_meses_var13_largo_ult3 num_meses_var13_medio_ult3 num_meses_var17_ult3
num_meses_var29_ult3 num_meses_var33_ult3 num_meses_var39_vig_ult3 num_meses_var44_ult3
num_meses_var5_ult3 num_meses_var8_ult3 num_op_var39_comer_ult1 num_op_var39_comer_ult3
num_op_var39_efect_ult1 num_op_var39_efect_ult3 num_op_var39_hace2 num_op_var39_hace3
num_op_var39_ult1 num_op_var39_ult3 num_op_var40_comer_ult1 num_op_var40_comer_ult3
num_op_var40_efect_ult1 num_op_var40_efect_ult3 num_op_var40_hace2 num_op_var40_hace3
num_op_var40_ult1 num_op_var40_ult3 num_op_var41_comer_ult1 num_op_var41_comer_ult3
num_op_var41_efect_ult1 num_op_var41_efect_ult3 num_op_var41_hace2 num_op_var41_hace3
num_op_var41_ult1 num_op_var41_ult3 num_reemb_var13_ult1 num_reemb_var17_hace3 num_reemb_var17_ult1
num_reemb_var33_ult1 num_sal_var16_ult1 num_trasp_var11_ult1 num_trasp_var17_in_hace3
num_trasp_var17_in_ult1 num_trasp_var17_out_ult1 num_trasp_var33_in_hace3 num_trasp_var33_in_ult1
num_trasp_var33_out_ult1 num_var1 num_var4 num_var5 num_var6 num_var8 num_var12 num_var13 num_var14
num_var17 num_var20 num_var24 num_var30 num_var31 num_var33 num_var35 num_var40 num_var42 num_var44
num_var12_0 num_var13_0 num_var13_corto num_var13_corto_0 num_var13_largo num_var13_largo_0
num_var13_medio_0 num_var14_0 num_var17_0 num_var18_0 num_var1_0 num_var20_0 num_var22_hace2
num_var22_hace3 num_var22_ult1 num_var22_ult3 num_var24_0 num_var25_0 num_var26_0 num_var30_0
num_var31_0 num_var32_0 num_var33_0 num_var34_0 num_var37_0 num_var37_med_ult2 num_var39_0 num_var40_0
num_var41_0 num_var42_0 num_var43_emit_ult1 num_var43_recib_ult1 num_var44_0 num_var45_hace2
num_var45_hace3 num_var45_ult1 num_var45_ult3 num_var5_0 num_var6_0 num_var7_emit_ult1
num_var7_recib_ult1 num_var8_0 num_venta_var44_hace3 num_venta_var44_ult1 saldo_medio_var12_hace2
saldo_medio_var12_hace3 saldo_medio_var12_ult1 saldo_medio_var12_ult3 saldo_medio_var13_corto_hace2
saldo_medio_var13_corto_hace3 saldo_medio_var13_corto_ult1 saldo_medio_var13_corto_ult3
saldo_medio_var13_largo_hace2 saldo_medio_var13_largo_hace3 saldo_medio_var13_largo_ult1
saldo_medio_var13_largo_ult3 saldo_medio_var13_medio_hace2 saldo_medio_var13_medio_ult3
saldo_medio_var17_hace2 saldo_medio_var17_hace3 saldo_medio_var17_ult1 saldo_medio_var17_ult3
saldo_medio_var29_hace2 saldo_medio_var29_hace3 saldo_medio_var29_ult1 saldo_medio_var29_ult3
saldo_medio_var33_hace2 saldo_medio_var33_hace3 saldo_medio_var33_ult1 saldo_medio_var33_ult3
saldo_medio_var44_hace2 saldo_medio_var44_hace3 saldo_medio_var44_ult1 saldo_medio_var44_ult3
saldo_medio_var5_hace2 saldo_medio_var5_hace3 saldo_medio_var5_ult1 saldo_medio_var5_ult3
saldo_medio_var8_hace2 saldo_medio_var8_hace3 saldo_medio_var8_ult1 saldo_medio_var8_ult3 saldo_var1
saldo_var5 saldo_var6 saldo_var8 saldo_var12 saldo_var13 saldo_var14 saldo_var17 saldo_var18
saldo_var20 saldo_var24 saldo_var25 saldo_var26 saldo_var30 saldo_var31 saldo_var32 saldo_var33
saldo_var34 saldo_var37 saldo_var40 saldo_var42 saldo_var44 saldo_var13_corto saldo_var13_largo
saldo_var13_medio var21 var36 var38 /
selection=stepwise;
Run;

/*

Ejecutar la macro randomselect v 4.0

macro randomselect v 4.0.sas

*/

/*

Random Select with 308 variables

sinicio=1457,
sfinal=1487,


*/


%randomselect(data=uno,
listclass=,
vardepen=TARGET,
modelo=VAR2 VAR3 delta_imp_amort_var18_1y3 delta_imp_amort_var34_1y3 delta_imp_aport_var13_1y3
delta_imp_aport_var17_1y3 delta_imp_aport_var33_1y3 delta_imp_compra_var44_1y3
delta_imp_reemb_var13_1y3 delta_imp_reemb_var17_1y3 delta_imp_reemb_var33_1y3
delta_imp_trasp_var17_in_1y3 delta_imp_trasp_var17_out_1y3 delta_imp_trasp_var33_in_1y3
delta_imp_trasp_var33_out_1y3 delta_imp_venta_var44_1y3 delta_num_aport_var13_1y3
delta_num_aport_var17_1y3 delta_num_aport_var33_1y3 delta_num_compra_var44_1y3
delta_num_venta_var44_1y3 imp_amort_var18_ult1 imp_amort_var34_ult1 imp_aport_var13_hace3
imp_aport_var13_ult1 imp_aport_var17_hace3 imp_aport_var17_ult1 imp_aport_var33_hace3
imp_aport_var33_ult1 imp_compra_var44_hace3 imp_compra_var44_ult1 imp_ent_var16_ult1
imp_op_var39_comer_ult1 imp_op_var39_comer_ult3 imp_op_var39_efect_ult1 imp_op_var39_efect_ult3
imp_op_var39_ult1 imp_op_var40_comer_ult1 imp_op_var40_comer_ult3 imp_op_var40_efect_ult1
imp_op_var40_efect_ult3 imp_op_var40_ult1 imp_op_var41_comer_ult1 imp_op_var41_comer_ult3
imp_op_var41_efect_ult1 imp_op_var41_efect_ult3 imp_op_var41_ult1 imp_reemb_var13_ult1
imp_reemb_var17_hace3 imp_reemb_var17_ult1 imp_reemb_var33_ult1 imp_sal_var16_ult1
imp_trans_var37_ult1 imp_trasp_var17_in_hace3 imp_trasp_var17_in_ult1 imp_trasp_var17_out_ult1
imp_trasp_var33_in_hace3 imp_trasp_var33_in_ult1 imp_trasp_var33_out_ult1 imp_var43_emit_ult1
imp_var7_emit_ult1 imp_var7_recib_ult1 imp_venta_var44_hace3 imp_venta_var44_ult1 ind_var1 ind_var5
ind_var6 ind_var8 ind_var12 ind_var13 ind_var14 ind_var17 ind_var19 ind_var20 ind_var24 ind_var30
ind_var31 ind_var33 ind_var40 ind_var44 ind_var10_ult1 ind_var10cte_ult1 ind_var12_0 ind_var13_0
ind_var13_corto ind_var13_corto_0 ind_var13_largo ind_var13_largo_0 ind_var13_medio_0 ind_var14_0
ind_var17_0 ind_var18_0 ind_var1_0 ind_var20_0 ind_var24_0 ind_var25_0 ind_var25_cte ind_var26_0
ind_var26_cte ind_var30_0 ind_var31_0 ind_var32_0 ind_var32_cte ind_var33_0 ind_var34_0 ind_var37_0
ind_var37_cte ind_var39_0 ind_var40_0 ind_var41_0 ind_var43_emit_ult1 ind_var43_recib_ult1 ind_var44_0
ind_var5_0 ind_var6_0 ind_var7_emit_ult1 ind_var7_recib_ult1 ind_var8_0 ind_var9_cte_ult1
ind_var9_ult1 num_aport_var13_hace3 num_aport_var13_ult1 num_aport_var17_hace3 num_aport_var17_ult1
num_aport_var33_hace3 num_aport_var33_ult1 num_compra_var44_hace3 num_compra_var44_ult1
num_ent_var16_ult1 num_med_var22_ult3 num_med_var45_ult3 num_meses_var12_ult3
num_meses_var13_corto_ult3 num_meses_var13_largo_ult3 num_meses_var13_medio_ult3 num_meses_var17_ult3
num_meses_var29_ult3 num_meses_var33_ult3 num_meses_var39_vig_ult3 num_meses_var44_ult3
num_meses_var5_ult3 num_meses_var8_ult3 num_op_var39_comer_ult1 num_op_var39_comer_ult3
num_op_var39_efect_ult1 num_op_var39_efect_ult3 num_op_var39_hace2 num_op_var39_hace3
num_op_var39_ult1 num_op_var39_ult3 num_op_var40_comer_ult1 num_op_var40_comer_ult3
num_op_var40_efect_ult1 num_op_var40_efect_ult3 num_op_var40_hace2 num_op_var40_hace3
num_op_var40_ult1 num_op_var40_ult3 num_op_var41_comer_ult1 num_op_var41_comer_ult3
num_op_var41_efect_ult1 num_op_var41_efect_ult3 num_op_var41_hace2 num_op_var41_hace3
num_op_var41_ult1 num_op_var41_ult3 num_reemb_var13_ult1 num_reemb_var17_hace3 num_reemb_var17_ult1
num_reemb_var33_ult1 num_sal_var16_ult1 num_trasp_var11_ult1 num_trasp_var17_in_hace3
num_trasp_var17_in_ult1 num_trasp_var17_out_ult1 num_trasp_var33_in_hace3 num_trasp_var33_in_ult1
num_trasp_var33_out_ult1 num_var1 num_var4 num_var5 num_var6 num_var8 num_var12 num_var13 num_var14
num_var17 num_var20 num_var24 num_var30 num_var31 num_var33 num_var35 num_var40 num_var42 num_var44
num_var12_0 num_var13_0 num_var13_corto num_var13_corto_0 num_var13_largo num_var13_largo_0
num_var13_medio_0 num_var14_0 num_var17_0 num_var18_0 num_var1_0 num_var20_0 num_var22_hace2
num_var22_hace3 num_var22_ult1 num_var22_ult3 num_var24_0 num_var25_0 num_var26_0 num_var30_0
num_var31_0 num_var32_0 num_var33_0 num_var34_0 num_var37_0 num_var37_med_ult2 num_var39_0 num_var40_0
num_var41_0 num_var42_0 num_var43_emit_ult1 num_var43_recib_ult1 num_var44_0 num_var45_hace2
num_var45_hace3 num_var45_ult1 num_var45_ult3 num_var5_0 num_var6_0 num_var7_emit_ult1
num_var7_recib_ult1 num_var8_0 num_venta_var44_hace3 num_venta_var44_ult1 saldo_medio_var12_hace2
saldo_medio_var12_hace3 saldo_medio_var12_ult1 saldo_medio_var12_ult3 saldo_medio_var13_corto_hace2
saldo_medio_var13_corto_hace3 saldo_medio_var13_corto_ult1 saldo_medio_var13_corto_ult3
saldo_medio_var13_largo_hace2 saldo_medio_var13_largo_hace3 saldo_medio_var13_largo_ult1
saldo_medio_var13_largo_ult3 saldo_medio_var13_medio_hace2 saldo_medio_var13_medio_ult3
saldo_medio_var17_hace2 saldo_medio_var17_hace3 saldo_medio_var17_ult1 saldo_medio_var17_ult3
saldo_medio_var29_hace2 saldo_medio_var29_hace3 saldo_medio_var29_ult1 saldo_medio_var29_ult3
saldo_medio_var33_hace2 saldo_medio_var33_hace3 saldo_medio_var33_ult1 saldo_medio_var33_ult3
saldo_medio_var44_hace2 saldo_medio_var44_hace3 saldo_medio_var44_ult1 saldo_medio_var44_ult3
saldo_medio_var5_hace2 saldo_medio_var5_hace3 saldo_medio_var5_ult1 saldo_medio_var5_ult3
saldo_medio_var8_hace2 saldo_medio_var8_hace3 saldo_medio_var8_ult1 saldo_medio_var8_ult3 saldo_var1
saldo_var5 saldo_var6 saldo_var8 saldo_var12 saldo_var13 saldo_var14 saldo_var17 saldo_var18
saldo_var20 saldo_var24 saldo_var25 saldo_var26 saldo_var30 saldo_var31 saldo_var32 saldo_var33
saldo_var34 saldo_var37 saldo_var40 saldo_var42 saldo_var44 saldo_var13_corto saldo_var13_largo
saldo_var13_medio var21 var36 var38,
criterio=SBC,
sinicio=1457,
sfinal=1487,
fracciontrain=0.8,directorio=Z:\git\Bitbucket\santander-kaggle\logs);


/*

Random Select with 308 variables

sinicio=1457,
sfinal=1487,


*/


/*

Result:

  1 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 saldo_medio_var8_u
  2 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var24 ind_var30 ind_var12_0 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var41_efect_u num_reemb_var17_ult1 num_var8 num_var22_
  3 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 num_var42_0 num_var8_0
  4 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_var8 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_medio_var8_ult saldo_var5 s
  5 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var22_ult1 num_var42_0 num_var45_ult3 saldo_var5 s
  6 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_var8 num_var22_ult1 num_var42_0 num_var45_ult3 saldo_var5 saldo_var8 var38
  7 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var8 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var5 num_var30 num_var22_ult1 saldo_var5 saldo_var30 var38
  8 Intercept VAR2 VAR3 imp_op_var40_efect_u ind_var24 ind_var30 ind_var12_0 ind_var13_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22
  9 Intercept VAR2 VAR3 imp_op_var41_ult1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var45_ult3 saldo_var5 sald
 10 Intercept VAR2 VAR3 ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_op_var40_efect_u num_reemb_var17_ult1 num_var22_hace2 num_var22_ult1 saldo_var5 saldo_var26
 11 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var32_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_meses_var8_ult3 num_reemb_var17_ult1 num_var8 num_var22_ult1 sal
 12 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var20 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var5 num_var30 num_var14_0 num_var22_hace2 num_var22_ult1 saldo_m
 13 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var22_ult1 saldo_medio_var5_ult saldo_medio_va
 14 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 num_var42_0 saldo_v
 15 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_reemb_var17_ult1 num_var22_ult1 saldo_var5 saldo_var26 saldo_var30 va
 16 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_var5 saldo_var8 var38
 17 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var30 ind_var30_0 ind_var41_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_reemb_var17_ult1 num_var5 num_var30 num_var22_ult1 saldo_var5 saldo_var8 sald
 18 Intercept VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u imp_op_var41_ult1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 saldo_var5 saldo_var8 sald
 19 Intercept VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_var5 saldo_var30
 20 Intercept VAR3 delta_imp_reemb_var1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 num_var42_0 saldo_v
 21 Intercept VAR3 delta_imp_reemb_var1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_var5 saldo_var8 var38
 22 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var31_0 ind_var43_emit_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 num_var39_0 num_v
 23 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_ent_var16_ult1 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var22_ult
 24 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var8 num_var22_hace2 num_var22_ult1 num_var42_0 saldo_medio_var8_ult saldo_var5 saldo_var30 var
 25 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var8 ind_var13 ind_var30 ind_var24_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_var22_ult1 num_var42_0 saldo_var5 saldo_var8 saldo_var30 var38
 26 Intercept VAR3 imp_op_var39_efect_u ind_var30 ind_var14_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 num_var30_0 num_var5_0 saldo_medio_var5_ult saldo_medio_v
 27 Intercept VAR3 imp_op_var39_efect_u ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_ent_var16_ult1 num_meses_var5_ult3 num_var5 num_var30 num_var22_ult1 saldo_medio_var8_ult saldo_var5 saldo_var26 saldo_var30 var38
 28 Intercept VAR3 imp_op_var39_efect_u ind_var8 ind_var24 ind_var30 ind_var12_0 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_var22_ult1 num_var42_0 saldo_var5 saldo_var8 var38
 29 Intercept VAR3 imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var45_ult1 saldo_var5 saldo_
 30 Intercept VAR3 imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var32_0 ind_var41_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_var22_hace2 num_var22_ult1 num_var42_0 saldo_var5 sa
 31 Intercept VAR3 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 nu


  
*/


%randomselect(data=uno,
listclass=,
vardepen=TARGET,
modelo=VAR2 VAR3 delta_imp_amort_var18_1y3 delta_imp_amort_var34_1y3 delta_imp_aport_var13_1y3
delta_imp_aport_var17_1y3 delta_imp_aport_var33_1y3 delta_imp_compra_var44_1y3
delta_imp_reemb_var13_1y3 delta_imp_reemb_var17_1y3 delta_imp_reemb_var33_1y3
delta_imp_trasp_var17_in_1y3 delta_imp_trasp_var17_out_1y3 delta_imp_trasp_var33_in_1y3
delta_imp_trasp_var33_out_1y3 delta_imp_venta_var44_1y3 delta_num_aport_var13_1y3
delta_num_aport_var17_1y3 delta_num_aport_var33_1y3 delta_num_compra_var44_1y3
delta_num_venta_var44_1y3 imp_amort_var18_ult1 imp_amort_var34_ult1 imp_aport_var13_hace3
imp_aport_var13_ult1 imp_aport_var17_hace3 imp_aport_var17_ult1 imp_aport_var33_hace3
imp_aport_var33_ult1 imp_compra_var44_hace3 imp_compra_var44_ult1 imp_ent_var16_ult1
imp_op_var39_comer_ult1 imp_op_var39_comer_ult3 imp_op_var39_efect_ult1 imp_op_var39_efect_ult3
imp_op_var39_ult1 imp_op_var40_comer_ult1 imp_op_var40_comer_ult3 imp_op_var40_efect_ult1
imp_op_var40_efect_ult3 imp_op_var40_ult1 imp_op_var41_comer_ult1 imp_op_var41_comer_ult3
imp_op_var41_efect_ult1 imp_op_var41_efect_ult3 imp_op_var41_ult1 imp_reemb_var13_ult1
imp_reemb_var17_hace3 imp_reemb_var17_ult1 imp_reemb_var33_ult1 imp_sal_var16_ult1
imp_trans_var37_ult1 imp_trasp_var17_in_hace3 imp_trasp_var17_in_ult1 imp_trasp_var17_out_ult1
imp_trasp_var33_in_hace3 imp_trasp_var33_in_ult1 imp_trasp_var33_out_ult1 imp_var43_emit_ult1
imp_var7_emit_ult1 imp_var7_recib_ult1 imp_venta_var44_hace3 imp_venta_var44_ult1 ind_var1 ind_var5
ind_var6 ind_var8 ind_var12 ind_var13 ind_var14 ind_var17 ind_var19 ind_var20 ind_var24 ind_var30
ind_var31 ind_var33 ind_var40 ind_var44 ind_var10_ult1 ind_var10cte_ult1 ind_var12_0 ind_var13_0
ind_var13_corto ind_var13_corto_0 ind_var13_largo ind_var13_largo_0 ind_var13_medio_0 ind_var14_0
ind_var17_0 ind_var18_0 ind_var1_0 ind_var20_0 ind_var24_0 ind_var25_0 ind_var25_cte ind_var26_0
ind_var26_cte ind_var30_0 ind_var31_0 ind_var32_0 ind_var32_cte ind_var33_0 ind_var34_0 ind_var37_0
ind_var37_cte ind_var39_0 ind_var40_0 ind_var41_0 ind_var43_emit_ult1 ind_var43_recib_ult1 ind_var44_0
ind_var5_0 ind_var6_0 ind_var7_emit_ult1 ind_var7_recib_ult1 ind_var8_0 ind_var9_cte_ult1
ind_var9_ult1 num_aport_var13_hace3 num_aport_var13_ult1 num_aport_var17_hace3 num_aport_var17_ult1
num_aport_var33_hace3 num_aport_var33_ult1 num_compra_var44_hace3 num_compra_var44_ult1
num_ent_var16_ult1 num_med_var22_ult3 num_med_var45_ult3 num_meses_var12_ult3
num_meses_var13_corto_ult3 num_meses_var13_largo_ult3 num_meses_var13_medio_ult3 num_meses_var17_ult3
num_meses_var29_ult3 num_meses_var33_ult3 num_meses_var39_vig_ult3 num_meses_var44_ult3
num_meses_var5_ult3 num_meses_var8_ult3 num_op_var39_comer_ult1 num_op_var39_comer_ult3
num_op_var39_efect_ult1 num_op_var39_efect_ult3 num_op_var39_hace2 num_op_var39_hace3
num_op_var39_ult1 num_op_var39_ult3 num_op_var40_comer_ult1 num_op_var40_comer_ult3
num_op_var40_efect_ult1 num_op_var40_efect_ult3 num_op_var40_hace2 num_op_var40_hace3
num_op_var40_ult1 num_op_var40_ult3 num_op_var41_comer_ult1 num_op_var41_comer_ult3
num_op_var41_efect_ult1 num_op_var41_efect_ult3 num_op_var41_hace2 num_op_var41_hace3
num_op_var41_ult1 num_op_var41_ult3 num_reemb_var13_ult1 num_reemb_var17_hace3 num_reemb_var17_ult1
num_reemb_var33_ult1 num_sal_var16_ult1 num_trasp_var11_ult1 num_trasp_var17_in_hace3
num_trasp_var17_in_ult1 num_trasp_var17_out_ult1 num_trasp_var33_in_hace3 num_trasp_var33_in_ult1
num_trasp_var33_out_ult1 num_var1 num_var4 num_var5 num_var6 num_var8 num_var12 num_var13 num_var14
num_var17 num_var20 num_var24 num_var30 num_var31 num_var33 num_var35 num_var40 num_var42 num_var44
num_var12_0 num_var13_0 num_var13_corto num_var13_corto_0 num_var13_largo num_var13_largo_0
num_var13_medio_0 num_var14_0 num_var17_0 num_var18_0 num_var1_0 num_var20_0 num_var22_hace2
num_var22_hace3 num_var22_ult1 num_var22_ult3 num_var24_0 num_var25_0 num_var26_0 num_var30_0
num_var31_0 num_var32_0 num_var33_0 num_var34_0 num_var37_0 num_var37_med_ult2 num_var39_0 num_var40_0
num_var41_0 num_var42_0 num_var43_emit_ult1 num_var43_recib_ult1 num_var44_0 num_var45_hace2
num_var45_hace3 num_var45_ult1 num_var45_ult3 num_var5_0 num_var6_0 num_var7_emit_ult1
num_var7_recib_ult1 num_var8_0 num_venta_var44_hace3 num_venta_var44_ult1 saldo_medio_var12_hace2
saldo_medio_var12_hace3 saldo_medio_var12_ult1 saldo_medio_var12_ult3 saldo_medio_var13_corto_hace2
saldo_medio_var13_corto_hace3 saldo_medio_var13_corto_ult1 saldo_medio_var13_corto_ult3
saldo_medio_var13_largo_hace2 saldo_medio_var13_largo_hace3 saldo_medio_var13_largo_ult1
saldo_medio_var13_largo_ult3 saldo_medio_var13_medio_hace2 saldo_medio_var13_medio_ult3
saldo_medio_var17_hace2 saldo_medio_var17_hace3 saldo_medio_var17_ult1 saldo_medio_var17_ult3
saldo_medio_var29_hace2 saldo_medio_var29_hace3 saldo_medio_var29_ult1 saldo_medio_var29_ult3
saldo_medio_var33_hace2 saldo_medio_var33_hace3 saldo_medio_var33_ult1 saldo_medio_var33_ult3
saldo_medio_var44_hace2 saldo_medio_var44_hace3 saldo_medio_var44_ult1 saldo_medio_var44_ult3
saldo_medio_var5_hace2 saldo_medio_var5_hace3 saldo_medio_var5_ult1 saldo_medio_var5_ult3
saldo_medio_var8_hace2 saldo_medio_var8_hace3 saldo_medio_var8_ult1 saldo_medio_var8_ult3 saldo_var1
saldo_var5 saldo_var6 saldo_var8 saldo_var12 saldo_var13 saldo_var14 saldo_var17 saldo_var18
saldo_var20 saldo_var24 saldo_var25 saldo_var26 saldo_var30 saldo_var31 saldo_var32 saldo_var33
saldo_var34 saldo_var37 saldo_var40 saldo_var42 saldo_var44 saldo_var13_corto saldo_var13_largo
saldo_var13_medio var21 var36 var38,
criterio=SBC,
sinicio=450,
sfinal=490,
fracciontrain=0.8,directorio=Z:\git\Bitbucket\santander-kaggle\logs);

/*

Result:

 1 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_ent_var16_ult1 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1
  2 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var30 ind_var30_0 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 num_var22_ult3 num_var30_0 num_var39_0 num_var43_recib_ult1 num_var5_0 saldo_med
  3 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var39_ult1 imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_reemb_var17_ult1 num_var22_ult1 num_var42_0 sa
  4 Intercept VAR2 VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u imp_op_var41_ult1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var45
  5 Intercept VAR2 VAR3 delta_imp_reemb_var1 ind_var8 ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_op_var41_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_var5 saldo
  6 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_var5 s
  7 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var41_0 ind_var43_recib_ult1 num_meses_var5_ult3 num_op_var40_efect_u num_var8 num_var22_ult1 num_var42_0 num_var8_0 saldo_medio_var8_ult saldo_var5 var38
  8 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_var14_0 num_var22_ult1 num_var32_0 saldo_medio_var8_ult saldo_var5 var38
  9 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 num_meses_var5_ult3 num_op_var39_efect_u num_var8 num_var22_hace2 num_var22_ult1 num_var8_0 saldo_medio_var8_ult saldo_var5 saldo_var30 var38
 10 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_va
 11 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var22_ult1 num_var22_ult3 saldo_var5 saldo_var8 saldo_var30 var38
 12 Intercept VAR2 VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 num_med_var22_ult3 num_meses_var5_ult3 num_reemb_var17_ult1 num_var22_ult1 num_var42_0 num_var45_ult1 num_var8_0 saldo_medio_va
 13 Intercept VAR2 VAR3 imp_op_var40_efect_u ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_var8 num_var22_hace2 num_var22_ult1 num_var42_0 saldo_var5 saldo_var30 var38
 14 Intercept VAR2 VAR3 imp_op_var41_ult1 ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 saldo_var5 saldo_v
 15 Intercept VAR2 VAR3 imp_op_var41_ult1 ind_var30 ind_var13_0 ind_var24_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_var8 num_var22_ult1 num_var42_0 saldo_var5 saldo_var8 saldo_var30 var38
 16 Intercept VAR2 VAR3 imp_op_var41_ult1 ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_medio_var5_ult saldo_var26 var38
 17 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u imp_op_var40_efect_u ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var5 num_var30 num_var22_ult1 num_v
 18 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var22_hace2 num_var22_ult1 saldo_medio_var8_ul
 19 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 saldo_medio_var8_ult saldo_var5 var38
 20 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 saldo_var5 saldo_var8 saldo_var30 var38
 21 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var20 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var5 num_var30 num_var14_0 num_var22_ult1 sald
 22 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var24 ind_var30 ind_var12_0 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var8 num_var22_ult1 num_var22_ult3 num_va
 23 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_reemb_var17_ult1 num_var5 num_var30 num_var14_0 num_var22_ult1 num_var41_0 saldo_medio_var8_ult sa
 24 Intercept VAR3 delta_imp_reemb_var1 imp_op_var39_efect_u ind_var8 ind_var13 ind_var30 ind_var24_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var22_ult1 num_var42_0 saldo_var5 saldo_var8 saldo_var30 var38
 25 Intercept VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u imp_op_var41_ult1 ind_var8 ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_medio_var8_ult sal
 26 Intercept VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_va
 27 Intercept VAR3 delta_imp_reemb_var1 imp_op_var40_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_reemb_var17_ult1 num_var14_0 num_var22_ult1 saldo_medio_var8_ult sa
 28 Intercept VAR3 delta_imp_reemb_var1 imp_op_var41_efect_u ind_var24 ind_var30 ind_var12_0 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_reemb_var17_ult1 num_var8 num_var14_0 num_var22_ult1 num_var22
 29 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var12_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_med_var22_ult3 num_meses_var5_ult3 num_var8 num_var14_0 num_var22_ult1 saldo_medio_var8_ult saldo_var5 sa
 30 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var8 num_var22_ult1 num_var22_ult3 num_var42_0 saldo_medio_var8_ult saldo_var5 saldo_
 31 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var8 num_var14_0 num_var22_ult1 num_var45_ult3 saldo_medio_var8_ult saldo_var5 saldo_var30 var38
 32 Intercept VAR3 imp_op_var39_efect_u imp_op_var40_efect_u ind_var8 ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_var5 sald
 33 Intercept VAR3 imp_op_var39_efect_u ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_op_var40_efect_u num_var8 num_var22_ult1 num_var22_ult3 saldo_var5 saldo_var8 saldo_var30 var38
 34 Intercept VAR3 imp_op_var39_efect_u ind_var13 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var5 num_var12 num_var42 num_var14_0 num_var22_ult1 saldo_var5 saldo_var26 saldo_var30 var38
 35 Intercept VAR3 imp_op_var39_efect_u ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var31_0 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_var8 num_var14_0 num_var22_ult1 num_var43_recib_ult1 num_var45_ult3 saldo_var5 saldo_var8 var38
 36 Intercept VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_reemb_var17_ult1 num_var14_0 num_var22_ult1 num_var22_ult3 saldo_var5 saldo_var8 saldo_var30 var3
 37 Intercept VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_var14_0 num_var22_ult1 saldo_var5 saldo_var8 saldo_var30 var38
 38 Intercept VAR3 imp_op_var39_efect_u ind_var8 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var43_recib_ult1 num_med_var22_ult3 num_meses_var5_ult3 num_var14_0 num_var22_ult1 num_var8_0 saldo_medio_var8_ult saldo_var5 saldo_var30 var38
 39 Intercept VAR3 imp_op_var40_efect_u ind_var13 ind_var30 ind_var24_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_var8 num_var22_ult1 num_var42_0 saldo_medio_var8_ult saldo_var5 saldo_var30 var38
 40 Intercept VAR3 imp_op_var41_ult1 ind_var13 ind_var24 ind_var30 ind_var30_0 ind_var31_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var40_efect_u num_op_var41_efect_u num_var8 num_var14_0 num_var22_hace2 num_var22_ult1 saldo_var5 saldo_va
 41 Intercept VAR3 ind_var8 ind_var24 ind_var30 ind_var13_0 ind_var30_0 ind_var43_recib_ult1 ind_var8_0 num_meses_var5_ult3 num_op_var39_efect_u num_var14_0 num_var22_ult1 saldo_medio_var8_ult saldo_var5 saldo_var30 var38



  
*/


/*
Removing rows and droping columns to make the dataset small.

data unoucm.santander;
set ucm.santander; 
if _n_>=1000 then delete;
run;

data ucm.santander; set ucm.santander; Run; 
data uno;set ucm.santander; u=(ranuni(12355));
proc sort data=uno; by u; 
data train test;
set uno; if _n_<=699 then output train;
else output test;
run;



*/

data uno_small;
set ucm.santander; 
if _n_>=10000 then delete;
run;

data uno_small; set uno_small; u=(ranuni(12355));
proc sort data=uno_small; by u; 
data train test;
set uno_small; if _n_<=6999 then output train;
else output test;
run;

/* variables to use in the uno_small dataset 

VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
ind_var_8_0
num_meses_var4_ult3
num_meses_var5_ult3
num_meses_var8_ult3
num_op_var_39_efect_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1

*/


%cruzadalogistica
(archivo=uno_small,
vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
ind_var_8_0
num_meses_var4_ult3
num_meses_var5_ult3
num_meses_var8_ult3
num_op_var_39_efect_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
categor=,
ngrupos=4,sinicio=12345,sfinal=12375, objetivo=tasafallos);
data final1;set final;modelo=1;



%cruzadalogistica
(archivo=uno_small,vardepen=TARGET,
conti=saldo_var30 var3,
categor=,
ngrupos=4,sinicio=12345,sfinal=12375, objetivo=tasafallos);
data final2;set final;modelo=2;

%cruzadalogistica
(archivo=uno,vardepen=TARGET,
conti=VAR2 VAR3 delta_imp_amort_var18_1y3 delta_imp_amort_var34_1y3 delta_imp_aport_var13_1y3
delta_imp_aport_var17_1y3 delta_imp_aport_var33_1y3 delta_imp_compra_var44_1y3
delta_imp_reemb_var13_1y3 delta_imp_reemb_var17_1y3 delta_imp_reemb_var33_1y3
delta_imp_trasp_var17_in_1y3 delta_imp_trasp_var17_out_1y3 delta_imp_trasp_var33_in_1y3
delta_imp_trasp_var33_out_1y3 delta_imp_venta_var44_1y3 delta_num_aport_var13_1y3
delta_num_aport_var17_1y3 delta_num_aport_var33_1y3 delta_num_compra_var44_1y3
delta_num_venta_var44_1y3 imp_amort_var18_ult1 imp_amort_var34_ult1 imp_aport_var13_hace3
imp_aport_var13_ult1 imp_aport_var17_hace3 imp_aport_var17_ult1 imp_aport_var33_hace3
imp_aport_var33_ult1 imp_compra_var44_hace3 imp_compra_var44_ult1 imp_ent_var16_ult1
imp_op_var39_comer_ult1 imp_op_var39_comer_ult3 imp_op_var39_efect_ult1 imp_op_var39_efect_ult3
imp_op_var39_ult1 imp_op_var40_comer_ult1 imp_op_var40_comer_ult3 imp_op_var40_efect_ult1
imp_op_var40_efect_ult3 imp_op_var40_ult1 imp_op_var41_comer_ult1 imp_op_var41_comer_ult3
imp_op_var41_efect_ult1 imp_op_var41_efect_ult3 imp_op_var41_ult1 imp_reemb_var13_ult1
imp_reemb_var17_hace3 imp_reemb_var17_ult1 imp_reemb_var33_ult1 imp_sal_var16_ult1
imp_trans_var37_ult1 imp_trasp_var17_in_hace3 imp_trasp_var17_in_ult1 imp_trasp_var17_out_ult1
imp_trasp_var33_in_hace3 imp_trasp_var33_in_ult1 imp_trasp_var33_out_ult1 imp_var43_emit_ult1
imp_var7_emit_ult1 imp_var7_recib_ult1 imp_venta_var44_hace3 imp_venta_var44_ult1 ind_var1 ind_var5
ind_var6 ind_var8 ind_var12 ind_var13 ind_var14 ind_var17 ind_var19 ind_var20 ind_var24 ind_var30
ind_var31 ind_var33 ind_var40 ind_var44 ind_var10_ult1 ind_var10cte_ult1 ind_var12_0 ind_var13_0
ind_var13_corto ind_var13_corto_0 ind_var13_largo ind_var13_largo_0 ind_var13_medio_0 ind_var14_0
ind_var17_0 ind_var18_0 ind_var1_0 ind_var20_0 ind_var24_0 ind_var25_0 ind_var25_cte ind_var26_0
ind_var26_cte ind_var30_0 ind_var31_0 ind_var32_0 ind_var32_cte ind_var33_0 ind_var34_0 ind_var37_0
ind_var37_cte ind_var39_0 ind_var40_0 ind_var41_0 ind_var43_emit_ult1 ind_var43_recib_ult1 ind_var44_0
ind_var5_0 ind_var6_0 ind_var7_emit_ult1 ind_var7_recib_ult1 ind_var8_0 ind_var9_cte_ult1
ind_var9_ult1 num_aport_var13_hace3 num_aport_var13_ult1 num_aport_var17_hace3 num_aport_var17_ult1
num_aport_var33_hace3 num_aport_var33_ult1 num_compra_var44_hace3 num_compra_var44_ult1
num_ent_var16_ult1 num_med_var22_ult3 num_med_var45_ult3 num_meses_var12_ult3
num_meses_var13_corto_ult3 num_meses_var13_largo_ult3 num_meses_var13_medio_ult3 num_meses_var17_ult3
num_meses_var29_ult3 num_meses_var33_ult3 num_meses_var39_vig_ult3 num_meses_var44_ult3
num_meses_var5_ult3 num_meses_var8_ult3 num_op_var39_comer_ult1 num_op_var39_comer_ult3
num_op_var39_efect_ult1 num_op_var39_efect_ult3 num_op_var39_hace2 num_op_var39_hace3
num_op_var39_ult1 num_op_var39_ult3 num_op_var40_comer_ult1 num_op_var40_comer_ult3
num_op_var40_efect_ult1 num_op_var40_efect_ult3 num_op_var40_hace2 num_op_var40_hace3
num_op_var40_ult1 num_op_var40_ult3 num_op_var41_comer_ult1 num_op_var41_comer_ult3
num_op_var41_efect_ult1 num_op_var41_efect_ult3 num_op_var41_hace2 num_op_var41_hace3
num_op_var41_ult1 num_op_var41_ult3 num_reemb_var13_ult1 num_reemb_var17_hace3 num_reemb_var17_ult1
num_reemb_var33_ult1 num_sal_var16_ult1 num_trasp_var11_ult1 num_trasp_var17_in_hace3
num_trasp_var17_in_ult1 num_trasp_var17_out_ult1 num_trasp_var33_in_hace3 num_trasp_var33_in_ult1
num_trasp_var33_out_ult1 num_var1 num_var4 num_var5 num_var6 num_var8 num_var12 num_var13 num_var14
num_var17 num_var20 num_var24 num_var30 num_var31 num_var33 num_var35 num_var40 num_var42 num_var44
num_var12_0 num_var13_0 num_var13_corto num_var13_corto_0 num_var13_largo num_var13_largo_0
num_var13_medio_0 num_var14_0 num_var17_0 num_var18_0 num_var1_0 num_var20_0 num_var22_hace2
num_var22_hace3 num_var22_ult1 num_var22_ult3 num_var24_0 num_var25_0 num_var26_0 num_var30_0
num_var31_0 num_var32_0 num_var33_0 num_var34_0 num_var37_0 num_var37_med_ult2 num_var39_0 num_var40_0
num_var41_0 num_var42_0 num_var43_emit_ult1 num_var43_recib_ult1 num_var44_0 num_var45_hace2
num_var45_hace3 num_var45_ult1 num_var45_ult3 num_var5_0 num_var6_0 num_var7_emit_ult1
num_var7_recib_ult1 num_var8_0 num_venta_var44_hace3 num_venta_var44_ult1 saldo_medio_var12_hace2
saldo_medio_var12_hace3 saldo_medio_var12_ult1 saldo_medio_var12_ult3 saldo_medio_var13_corto_hace2
saldo_medio_var13_corto_hace3 saldo_medio_var13_corto_ult1 saldo_medio_var13_corto_ult3
saldo_medio_var13_largo_hace2 saldo_medio_var13_largo_hace3 saldo_medio_var13_largo_ult1
saldo_medio_var13_largo_ult3 saldo_medio_var13_medio_hace2 saldo_medio_var13_medio_ult3
saldo_medio_var17_hace2 saldo_medio_var17_hace3 saldo_medio_var17_ult1 saldo_medio_var17_ult3
saldo_medio_var29_hace2 saldo_medio_var29_hace3 saldo_medio_var29_ult1 saldo_medio_var29_ult3
saldo_medio_var33_hace2 saldo_medio_var33_hace3 saldo_medio_var33_ult1 saldo_medio_var33_ult3
saldo_medio_var44_hace2 saldo_medio_var44_hace3 saldo_medio_var44_ult1 saldo_medio_var44_ult3
saldo_medio_var5_hace2 saldo_medio_var5_hace3 saldo_medio_var5_ult1 saldo_medio_var5_ult3
saldo_medio_var8_hace2 saldo_medio_var8_hace3 saldo_medio_var8_ult1 saldo_medio_var8_ult3 saldo_var1
saldo_var5 saldo_var6 saldo_var8 saldo_var12 saldo_var13 saldo_var14 saldo_var17 saldo_var18
saldo_var20 saldo_var24 saldo_var25 saldo_var26 saldo_var30 saldo_var31 saldo_var32 saldo_var33
saldo_var34 saldo_var37 saldo_var40 saldo_var42 saldo_var44 saldo_var13_corto saldo_var13_largo
saldo_var13_medio var21 var36 var38,
categor=,
ngrupos=4,sinicio=12345,sfinal=12375, objetivo=tasafallos);
data final3;set final;modelo=3;


Proc print data=final; run;


data union;set final1 final2 final3;
ods graphics off;
proc boxplot data=union;plot media*modelo;run;





/*

Ejecutar la macro neural binarias basicas

*/

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\neural binarias basicas.sas';



%binarialogistic(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
corte=50,semilla=12345,porcen=0.80); 




/* Show 20 rows */
proc print data=uno_small (obs=20);
run;

/* Describe the dataset variables */
proc contents data=uno_small out=sal;
data; set sal; put name @@; run;


/*

Ejecutar la macro neural network

*/

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\macros_neural_network_kaggle_santander.sas';


/* Neuronal Network  */


proc printto print='Z:\git\Bitbucket\santander-kaggle\logs\logs_neural.txt';run;
PROC DMDB DATA=uno_small dmdbcat=catatres;
target TARGET;
var VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1;
class TARGET;
run;



/*Número de nodos - 0 to 30 node */

%macro numeronodos(inicionodos=,finalnodos=,increnodos=);
data union;run;
%do nodos=&inicionodos %to &finalnodos %by &increnodos;
   %neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=&nodos,corte=50,semilla=12345,porcen=0.80);
   data estadisticos;set estadisticos;nodos=&nodos;run;
   data union;set union estadisticos;run;
%end;
data union;set union ;if _n_=1 then delete;run;
symbol v=circle i=join;
proc gplot data=union;plot (porcenVN porcenFN porcenVP porcenFP sensi especif tasafallos tasaciertos precision F_M)*nodos;run;
%mend;

%numeronodos(inicionodos=1,finalnodos=30,increnodos=5);



/*Número de nodos - 3 to 20 node */


%macro numeronodos(inicionodos=,finalnodos=,increnodos=);
data union;run;
%do nodos=&inicionodos %to &finalnodos %by &increnodos;
   %neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=&nodos,corte=50,semilla=12345,porcen=0.80);
   data estadisticos;set estadisticos;nodos=&nodos;run;
   data union;set union estadisticos;run;
%end;
data union;set union ;if _n_=1 then delete;run;
symbol v=circle i=join;
proc gplot data=union;plot (porcenVN porcenFN porcenVP porcenFP sensi especif tasafallos tasaciertos precision F_M)*nodos;run;
%mend;

%numeronodos(inicionodos=3,finalnodos=20,increnodos=3);



/* Levmar 12 nodos semilla 12345 prelim=5 porcen=0.8
*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=12345,porcen=0.80);


/* Levmar 12 nodos semilla 456 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,algoritmo=levmar,semilla=456,porcen=0.80);





/* BPROP 12 nodos semilla 12345 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=12345,algoritmo=bprop mom=0.8 learn=0.2,porcen=0.80);


/* BPROP 12 nodos semilla 456 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=456,algoritmo=BPROP mom=0.8 learn=0.2,porcen=0.80);


/* QUANEW 12 nodos semilla 12345 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=12345,algoritmo=quanew,porcen=0.80);


/* QUANEW 12 nodos semilla 456 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=456,algoritmo=quanew,porcen=0.80);


/* TRUREG 12 nodos semilla 12345 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET
,nodos=12,corte=50,semilla=12345,algoritmo=trureg,porcen=0.80);


/* TRUREG 12 nodos semilla 456 prelim=5 porcen=0.8*/
%neuralbinariabasica(archivo=uno_small,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
   listclass=,
vardep=TARGET,
nodos=12,corte=50,semilla=456,algoritmo=trureg,porcen=0.80);


/* Modelo 6 lleva muchos dias para processar */

%cruzadabinarianeural(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
categor=,
ngrupos=4,sinicio=123,sfinal=12456,nodos=12,meto=quanew,objetivo=tasafallos);
data final6;set final;modelo=6;



%cruzadabinarianeural(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
categor=,
ngrupos=4,sinicio=123,sfinal=124,nodos=12,meto=bprop mom=0.8 learn=0.2,objetivo=tasafallos);
data final7;set final;modelo=7;

%cruzadabinarianeural(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
categor=,
ngrupos=4,sinicio=123,sfinal=124,nodos=12,meto=levmar,objetivo=tasafallos);
data final8;set final;modelo=8;

data union;set final2 final3 final6 final7 final8 ;
ods graphics off;
proc boxplot data=union;plot media*modelo;run;

data union;set final2 final3 final7;
ods graphics off;
proc boxplot data=union;plot media*modelo;run;


/*

Ejecutar la macro con el nombre "todas macros bagging-randomforest-boosting" 

*/

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\todas macros bagging-randomforest-boosting.sas';




/* Trees  */

%baggingbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor= ,
semilla1=12345,porcen1=0.80,
sinicial=12000,sfinal=12020,
porcenbag=1,maxbranch=5,
nleaves=20,tamhoja=10,	
reemplazo=1,listalog=1,compara=1);


options mprint=0;options notes;


%randomforestbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.8,
maxtrees=50,variables=3,porcenbag=0.5,maxbranch=50,tamhoja=30,maxdepth=15,pvalor=0.1,compara=1);


%boostingbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.80,
iterations=1000,shrink=0.05,maxbranch=10,tamhoja=10,maxdepth=4,compara=1);


/*////Validacion cruzada de los algoritmos////*/

/*Bagging*/

/*

Ejecutar la macro con el nombre "todas macros bagging-randomforest-boosting" 

*/

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\todas macros bagging-randomforest-boosting.sas';

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\cruzada logistica y neural con early.sas';

%include '\\vmware-host\Shared Folders\git\Bitbucket\santander-kaggle\macros-and-code-samples\pack cruzadas binarias v 3.1.sas';

proc printto print='Z:\git\Bitbucket\santander-kaggle\logs\huge-log.txt';run;


%cruzadabaggingbin(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
ngrupos=4,sinicio=12345,sfinal=12355,
siniciobag=12345,sfinalbag=12355,
porcenbag=0.8,maxbranch=2,
nleaves=30,tamhoja=10,
reemplazo=1,objetivo=tasafallos);
data final9;set final;modelo=9;
proc print data=final9;run;



%cruzadabaggingbin(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
ngrupos=4,sinicio=12345,sfinal=12355,
siniciobag=12345,sfinalbag=12355,
porcenbag=0.8,maxbranch=3,
nleaves=10,tamhoja=6,
reemplazo=1,objetivo=tasafallos);
data final10;set final;modelo=10;
proc print data=final10;run;


%cruzadabaggingbin(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
ngrupos=4,sinicio=12345,sfinal=12355,
siniciobag=12345,sfinalbag=12355,
porcenbag=0.8,maxbranch=5,
nleaves=20,tamhoja=10,
reemplazo=1,objetivo=tasafallos);
data final11;set final;modelo=11;
proc print data=final11;run;


data union;set final9 final10 final11;
proc boxplot data=union;plot media*modelo;run;
data union;set final9 final11;
proc boxplot data=union;plot media*modelo;run;

/*Gradient boosting*/


%cruzadatreeboostbin(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1
,categor=,ngrupos=4,sinicio=12345,sfinal=12365,leafsize=5,
iteraciones=300,shrink=0.02,maxbranch=2,maxdepth=4,mincatsize=15,minobs=20,objetivo=tasafallos);
data final12;set final;modelo=12;

%cruzadatreeboostbin(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 ,
categor=,ngrupos=4,sinicio=12345,sfinal=12365,leafsize=5,
iteraciones=500,shrink=0.02,maxbranch=2,maxdepth=4,mincatsize=15,minobs=20,objetivo=tasafallos);
data final13;set final;modelo=13;

%cruzadatreeboostbin(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 
,categor=,ngrupos=4,sinicio=12345,sfinal=12365,leafsize=10,
iteraciones=1000,shrink=0.01,maxbranch=10,maxdepth=4,mincatsize=15,minobs=20,objetivo=tasafallos);
data final14;set final;modelo=14;

%cruzadatreeboostbin(archivo=uno_small,vardepen=TARGET,
conti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1 
,categor=,ngrupos=4,sinicio=12345,sfinal=12365,leafsize=10,
iteraciones=1000,shrink=0.05,maxbranch=10,maxdepth=4,mincatsize=15,minobs=20,objetivo=tasafallos);

data final15;set final;modelo=15;
data union;set final12 final13 final14 final15;
ods graphics off;
proc boxplot data=union;plot media*modelo;run;

data union;set final12 final13 final14;
proc boxplot data=union;plot media*modelo;run;


Started 13:05 pm

/*Random Forest*/

%randomforestbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.8,
maxtrees=50,variables=3,porcenbag=0.5,maxbranch=50,tamhoja=30,maxdepth=15,pvalor=0.1,compara=1);
data final16;set final;modelo=16;

%randomforestbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.8,
maxtrees=30,variables=3,porcenbag=0.5,maxbranch=10,tamhoja=10,maxdepth=15,pvalor=0.1,compara=1);
data final17;set final;modelo=17;

%randomforestbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.8,
maxtrees=50,variables=3,porcenbag=0.3,maxbranch=2,tamhoja=5,maxdepth=15,pvalor=0.1,compara=1);
data final18;set final;modelo=18;


%randomforestbin(archivo=uno_small,
vardep=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listcategor=,
semilla1=12345,porcen1=0.8,
maxtrees=50,variables=4,porcenbag=0.5,maxbranch=2,tamhoja=5,maxdepth=15,pvalor=0.1,compara=1);
data final19;set final;modelo=19;


data union;set final16 final17 final18 final19;
ods graphics off;
proc boxplot data=union;plot media*modelo;run;

proc print data=union;
run;




/*Comparación modelos */

data union;set final3 final6 final9 final13 final16;
proc boxplot data=union;plot media*modelo;run;
ods graphics off;
data union;set final3 final6 final9 final13;
proc boxplot data=union;plot media*modelo;run;

/*/// SVM ////*/


%cruzadaSVMbin
(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listclass=,
ngrupos=4,seminicio=12345,semifinal=12385,kernel=linear,c=10);
data final20;set final;modelo=20;

%cruzadaSVMbin
(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listclass=,
ngrupos=4,seminicio=12345,semifinal=12385,kernel=linear,c=5);
data final21;set final;modelo=21;

%cruzadaSVMbin
(archivo=uno_small,
vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
listclass=,
ngrupos=4,seminicio=11,semifinal=12,kernel=linear,c=15);
data final22;set final;modelo=22;


data union;set final20 final21 final22;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;


/*KNN*/

%cruzadakNNbin(archivo=uno_small,vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
ngrupos=4,seminicio=12345,semifinal=12385,k=7);
data final23;set final;modelo=23;

%cruzadakNNbin(archivo=uno_small,vardepen=TARGET,
listconti=VAR3
ind_var13
ind_var24
ind_var30
ind_var30_0
ind_var31_0
num_meses_var5_ult3
num_meses_var8_ult3
num_reemb_var17_ult1
num_var22_ult1
num_var22_ult3
saldo_var24
saldo_var42
var38
saldo_var30
saldo_var5
saldo_medio_var5_ult1
saldo_medio_var5_hace2
num_var30
num_var35
num_var4
ind_var5
num_var5
num_var42
var36
saldo_medio_var5_hace3
imp_op_var39_efect_ult1
num_var45_hace3
imp_op_var39_efect_ult3
saldo_medio_var8_ult1,
ngrupos=4,seminicio=12345,semifinal=12385,k=3);
data final24;set final;modelo=24;

data union;set final23 final24;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;


data union;set final3 final9 final13 final16 final20 final21 final22 final23 final24;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;


data union;set final3 final13 final16 final20 final21 final22 final23 final24;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;

data union;set final3 final6 final9 ;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;




data union;set final1 final2 final3 final4 final5 final6 final7 
final8 final9 final10 final11 final12 final13 final4 
final15 final16 final17 final18 final19 final20 final21 final22 
final23 final24 final25 final26 final27;
ods graphics off;

proc boxplot data=union;plot media*modelo;run;


/* 

ERROR: Attempt to reference a page past end-of-file on SASUSER.REGSTRY.ITEMSTOR.
ERROR: Value name does not exist: Include Blank Space In Clip Board
8175   data union;set final1 final2 final3 final4 final5 final6 final7
8176   final8 final9 final10 final11 final12 final13 final4
8177   final15 final16 final17 final18 final19 final20 final21 final22
8178   final23 final24 final25 final26 final27;
ERROR: File WORK.FINAL4.DATA does not exist.
ERROR: File WORK.FINAL5.DATA does not exist.
ERROR: File WORK.FINAL6.DATA does not exist.
ERROR: File WORK.FINAL7.DATA does not exist.
ERROR: File WORK.FINAL8.DATA does not exist.
ERROR: File WORK.FINAL10.DATA does not exist.
ERROR: File WORK.FINAL11.DATA does not exist.
ERROR: File WORK.FINAL12.DATA does not exist.
ERROR: File WORK.FINAL4.DATA does not exist.
ERROR: File WORK.FINAL25.DATA does not exist.
ERROR: File WORK.FINAL26.DATA does not exist.
ERROR: File WORK.FINAL27.DATA does not exist.
8179   ods graphics off;

*/


